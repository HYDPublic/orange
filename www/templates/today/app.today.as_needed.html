<ion-view hide-nav-bar="false" view-title="As Needed">
    <ion-nav-bar class="bar-orange" align-title="center">
        <ion-nav-buttons side="left" >
            <button ui-sref="app.today.schedule" class="button back-button button-clear header-item">
                <i class="icon ion-arrow-left-c"></i>
            </button>
        </ion-nav-buttons>
    </ion-nav-bar>
    <ion-content class="light-bg">
        <div class="text-center">
            <ion-spinner class="orange-loading-spinner" icon="dots"
                         ng-if="!asNeeded.medicationsPromise.$$state.status"></ion-spinner>
        </div>

        <ion-refresher pulling-text="Pull to refresh" on-refresh="asNeeded.refresh()">
        </ion-refresher>

        <ion-list can-swipe="true" >
            <ion-item class="" ng-repeat="medication in asNeeded.medications" ng-click="asNeeded.medicationClick(medication.id, $event)">
                <medication-block medication-name="medication.name"
                                  medication-brand="medication.brand"></medication-block>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>